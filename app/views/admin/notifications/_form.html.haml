.save_button.mdl-card
  = form_for [:admin, @event, @notification], :html => {:class =>'form-horizontal'}, :builder => CustomFormBuilder do |f|
    .mdl-grid.mdl-card.mdl-shadow--1dp
      .mdl-cell--12-col.mdl-cell--12-col-tablet.ml-color--shades-white.m-8
        %h4.heading-border.p-t-10.m-b-15
          General Information
          / %a{:href => '/whats_this/notification/general_information/notification_generalInfo.jpg', :class =>'helpTag testhelp fancybox'}
          /   what's this?
      = #render :partial => "admin/layouts/whats_this_popup", :locals => {:image_name => "notification_generalInfo.jpg", :section_id => "notification_general_section"}
      = f.custom_text_field :description, "Text *","background" => "false"
      - if !Rails.env.production?
        = f.new_custom_file_browser_field :image, "Notification Image", :id => "uploadBtn", :value => f.object.image_file_name, :action=> params[:action], "background" => "false"
        .mdl-cell--12-col.mdl-cell--12-col-tablet.ml-color--shades-white.m-8.m-b-5.errorMess
          .mdl-grid.p-v-5.form-group.mobiappstype
            .col-lg-4.mdl-typography--text-right 
              %p.displayInlineBlock.multicitytxt  Select Type
            .col-lg-7.p-h-12 
              = f.custom_radio_button :notification_type, "all", "All", :id => "option1"
              = f.custom_radio_button :notification_type, "group", "Group", :id => "option2"
        .mdl-cell--12-col.mdl-cell--12-col-tablet.m-8{:style => ((f.object.notification_type == 'all' or f.object.notification_type.blank?)? 'margin-top:30px;display:none;' : 'margin-top:30px')}
          .form-group
            %label.col-lg-4.control-label.ml-color--shades-white
              Select Groups
              %br
              %a{:href => admin_event_invitee_groups_path(:event_id => @event.id), :class =>'', :title => "Invitee Groups", :target => '_blank'}
                (View Available Groups)
            .col-lg-7
              -# default_group_list = [['No Polls taken', 'No Polls taken'], ['No Feedback given', 'No Feedback given'], ['No Quiz taken', 'No Quiz taken'], ['No Q&A', 'No Q&A'], ['NO QR code scanned', 'NO QR code scanned'], ['No Chat', 'No Chat']]
              - default_group_list = @groups.collect{|group| [ group.name, group.id ]}
              = f.select("notification", "group_ids", default_group_list,{:selected => f.object.group_ids},{include_blank: 'None', :multiple => true})
              .field_with_errors
                .span{:class => "errorMessage"}
                  = f.object.errors.messages[:group_ids].join("") rescue nil
        .mdl-cell--12-col.mdl-cell--12-col-tablet.m-8
          .form-group
            %label.col-lg-4.control-label.ml-color--shades-white
              Select Destination
            .col-lg-7
              %i.arrow.single
              - grouped_options = get_notification_type_group_array(@event)#[['Group based',['Group Notification']], ['Action based',['Agenda Rating', 'Agenda Favorite', 'Speaker Rating', 'Speaker Favorite', 'Invitee Favorite', 'Sponsors Favorite', 'Exhibitors Favorite']],['Logic based',['Polls Taken', 'Feedback Submitted', 'Quiz Answered', 'Question Asked', 'QR code scanned']],['Destination based',['Event Highlight', 'Event Listing', 'Quiz', 'Q&A', 'Speaker', 'Invitee', 'Profile ', 'Feedback', 'Agenda', 'Quiz', 'Poll', 'Leaderboard', 'FAQ', 'About', 'Conversation', 'E-Kit', 'Award', 'Contact', 'Sponsor', 'Gallery', 'Emergency Exit', 'Note', 'Venue', 'Custum Page1', 'Custum Page2', 'Custum Page3', 'Custom Page4', 'Custom Page5']]]
              = select_tag "notification[action]", grouped_options_for_select(grouped_options, :selected => f.object.action), :prompt => 'Select Notification Type', :class =>"select2-single form-control"
      .mdl-cell--12-col.mdl-cell--12-col-tablet.ml-color--shades-white.m-8.m-b-5.errorMess
        .mdl-grid.p-v-5.form-group.mobiappstype
          .col-lg-4.mdl-typography--text-right 
            %p.displayInlineBlock.multicitytxt  Select Time
          .col-lg-7.p-h-12 
            = f.custom_radio_button_menu :push_timing, "now","Push Now", :id => 'option3', :default_checked => (f.object.push_timing == 'now' or f.object.push_timing.blank?) ? 'checked' : ''
            = f.custom_radio_button_menu :push_timing, "later","Push Time", :id => 'option4', :default_checked => (f.object.push_timing == 'later') ? 'checked' : ''
            =# f.custom_radio_button :push_timing, "now", "Push Now", :id => "option3"
            =# f.custom_radio_button :push_timing, "later", "Push Later", :id => "option4"
      .mdl-cell--12-col.mdl-cell--12-col-tablet.ml-color--shades-white.m-8{:style => ((f.object.push_timing == 'now' or f.object.push_timing.blank?)? 'margin-top:30px;display:none;' : 'margin-top:30px')}
        .bs-component
          .form-group
            %label.col-lg-4.control-label{:for => "Push Time"} Push Time
            = f.custom_text_field_date :push_datetime, "Push Time", :id => "date-start", :value => f.object.push_datetime.present? ? f.object.push_datetime.strftime('%d/%m/%Y') : '' 
            .col-lg-3.timeDropdown
              .timeTab
                = f.custom_text_field_date :push_time_hour, " ", :class => "hours inputs is-focused", :placeholder => 'HH ', :value => "#{f.object.push_datetime.strftime('%l').strip.rjust(2, '0') rescue nil}", :col => '2'
                = f.custom_text_field_date :push_time_minute, " ", :class => "minutes inputs is-focused", :placeholder => 'MM ', :value => "#{f.object.push_datetime.strftime('%M').strip.rjust(2, '0') rescue nil}", :col => '2'
                = f.custom_text_field_date :push_time_am, " ", :class => "ampm inputs is-focused", :placeholder => 'AM/PM', :value => "#{f.object.push_datetime.strftime('%p') rescue nil}", :col => '3'
      = hidden_field_tag "type","#{params[:type]}" if params[:type].present?
    .fixed-activon-btn-new  
      = f.custom_submit_button "SEND"
      .mdl-button.mdl-js-button.mdl-button--raised.mdl-js-ripple-effect.btnsubmit.m-l-18.cancelBg
        .mdl-cell--12-col.mdl-cell--12-col-tablet.cancelbtn
          = back_button(:back)
      - if !Rails.env.production?
        .mdl-button.mdl-js-button.mdl-button--raised.mdl-js-ripple-effect.btnsubmit.m-l-18.cancelBg  
          .mdl-cell--12-col.mdl-cell--12-col-tablet.cancelbtn
            = link_to "New Group", new_admin_event_invitee_group_path(:event_id => @event.id),:class => "waves-effect waves-light btn"    
:javascript
  $(window).load(function(){
    flightTime();
    minutes();
    times();  
    $("#notification_notify_type").change(function(){
      selected_value = $("#notification_notify_type").val();
      if (selected_value == "Group"){
        $("#notification_notify_to").parent().parent().parent().show();
      }else{
        $("#notification_notify_to").parent().parent().parent().hide();
      }  
    });
  })
  $("#option1").click(function(){
    $("#notification_group_ids").parent().parent().parent().hide();
  });
  $("#option2").click(function(){
    $("#notification_group_ids").parent().parent().parent().show();
  });
  $("#option3").click(function(){
    $("#date-start").parent().parent().parent().parent().hide();
  });
  $("#option4").click(function(){
    $("#date-start").parent().parent().parent().parent().show();
  });