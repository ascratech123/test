.save_button.mdl-card.agendaheight
  = form_for [:admin, @event, @campaign, @edm],:html => {:class =>'form-horizontal'}, :builder => CustomFormBuilder do |f|
    -if params[:next].present?
      .mdl-grid.mdl-shadow--1dp
        .mdl-cell--12-col.mdl-cell--12-col-tablet.ml-color--shades-white.m-8
          %h4.heading-border.p-t-10
            General Information
        .mdl-cell--12-col.mdl-cell--12-col-tablet.ml-color--shades-white.m-8
          .mdl-grid.p-v-5
            .col-lg-4.mdl-typography--text-right
              %p.displayInlineBlock.multicitytxt eDM Broadcast Time
            .col-lg-3.p-h-12   
              = f.custom_radio_button_menu :edm_broadcast_value, "now","Now", :id => "edm_broadcast_time_now", :default_checked => (f.object.edm_broadcast_value == 'now' or f.object.edm_broadcast_time.blank?) ? 'checked' : ''
              = f.custom_radio_button_menu :edm_broadcast_value, "scheduled","Scheduled", :id => "edm_broadcast_time_scheduled", :default_checked => (f.object.edm_broadcast_value == 'scheduled') ? 'checked' : ''
        .mdl-cell--12-col.mdl-cell--12-col-tablet.ml-color--shades-white.m-8.Regiserror{:style => "display: #{(f.object.edm_broadcast_time == 'scheduled') ? "" : "none"}"}
          .bs-component.m-t-30
            .form-group
              %label.col-lg-4.control-label{:for => "Start EDM Date"} Scheduled Date
              = f.custom_text_field_date :start_date_time, "Start EDM Date", :id => "date-start",:value => f.object.edm_broadcast_time.present? ? f.object.edm_broadcast_time.strftime('%d/%m/%Y') : ''
              .col-lg-3.timeDropdown
                .timeTab
                  = f.custom_text_field_date :start_time_hour, " ", :class => "hours inputs is-focused", :placeholder => 'HH ', :value => "#{get_hour_minute_second_ampm(f.object.edm_broadcast_time, 'hour')}", :col => '2',:maxlength => "2"
                  = f.custom_text_field_date :start_time_minute, " ", :class => "minutes inputs is-focused", :placeholder => 'MM ', :value => "#{get_hour_minute_second_ampm(f.object.edm_broadcast_time, 'minute')}", :col => '2',:maxlength => "2"
                  = f.custom_text_field_date :start_time_am, " ", :class => "ampm inputs is-focused", :placeholder => 'AM/PM', :value => "#{get_hour_minute_second_ampm(f.object.edm_broadcast_time, 'ampm')}", :col => '3',:maxlength => "2"  
                  = f.hidden_field_tag :broadcast_date, "true"
      .fixed-activon-btn-new  
        = f.custom_submit_button "SEND"
        .mdl-button.mdl-js-button.mdl-button--raised.mdl-js-ripple-effect.btnsubmit.m-l-18.cancelBg
          .mdl-cell--12-col.mdl-cell--12-col-tablet.cancelbtn.registcancel
            = link_to admin_event_campaign_edms_path(:event_id => @event.id,:campaign_id => @edm.campaign_id),:class => "waves-effect waves-light btn" do
              Cancel 
    -else
      .mdl-grid.mdl-shadow--1dp
        .mdl-cell--12-col.mdl-cell--12-col-tablet.ml-color--shades-white.m-8
          %h4.heading-border.p-t-10
            General Information
        = f.custom_text_field :subject_line, "Subject Line","background" => "false" 
        .mdl-cell--12-col.mdl-cell--12-col-tablet.ml-color--shades-white.m-8
          .mdl-grid.p-v-5.m-b-10
            .col-lg-4.mdl-typography--text-right
              %p.displayInlineBlock.multicitytxt Template Type *
            .col-lg-7.p-h-12   
              = f.custom_radio_button_menu :template_type, "default_template","Default Template", :id => "default_template_for_edm", :default_checked => (f.object.template_type == 'default_template' or f.object.template_type.blank?) ? 'checked' : ''
              = f.custom_radio_button_menu :template_type, "custom_template","Custom Template", :id => "custom_template_for_edm", :default_checked => (f.object.template_type == 'custom_template') ? 'checked' : ''
        = f.new_custom_file_browser_field :header_image, "Header Image", :id => "header_image_uploadBtn", :value => f.object.header_image_file_name, :action=> params[:action], "background" => "false"
        = f.custom_text_area_field :body,"Body", "background" => "false"
        = f.new_custom_file_browser_field :footer_image, "Footer Image", :id => "footer_image_uploadBtn", :value => f.object.footer_image_file_name, :action=> params[:action], "background" => "false"
        .edm_ckeditor
          .ckeditor_custom{:style => "display: #{(f.object.template_type == 'custom_template') ? "" : "none"}"}
            = f.label "Custom Template *"
            = f.cktext_area :custom_code
      .fixed-activon-btn-new  
        = f.custom_submit_button "SAVE"
        .mdl-button.mdl-js-button.mdl-button--raised.mdl-js-ripple-effect.btnsubmit.m-l-18.cancelBg
          .mdl-cell--12-col.mdl-cell--12-col-tablet.cancelbtn
            = back_button(:back)
        = f.custom_submit_button "NEXT"

- if @edm.template_type.present? and @edm.template_type == "custom_template"
  :javascript
    $("#header_image_uploadBtn").parent().parent().parent().parent().hide();
    $("#footer_image_uploadBtn").parent().parent().parent().parent().hide();
    $("#body_sample5").parent().parent().parent().hide();
- if @edm.edm_broadcast_value.present? and @edm.edm_broadcast_value == "scheduled"
  :javascript
    $("#date-start").parent().parent().parent().parent().show();